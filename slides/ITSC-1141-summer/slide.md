---
theme: default
download: true
transition: slide-left
routerMode: hash
hideInToc: true
mdc: true
fonts:
  sans: Outfit, Noto Sans TC
  mono: Ubuntu Mono
##########################
title: ITSC 1141 Summer
name: ITSC-1141-summer
# themeConfig:
#   glowHue: -130
---

# 校務系統開發與管理

### 期初進度報告

<br />

學生：洪晙宸 <br />
專案導師：施仁忠 <br />
協助同仁：尤淑芬

---

# 專案暑期目標

- 職務不法侵害預防計畫管理系統
  - 問卷建置、管理、填寫系統
  - 類似公文簽核的問卷審核流程，簡化後以符合環安衛工作需求
  - 介接人事系統，討論資料缺失折衷方法
- Oauth維護
  - 版本更新與升級
  - 修正程式中寫死的設定，以符合資安要求
  - 容器化程式，移除硬體相依性

---

# 職務不法侵害預防計畫管理系統  - 工作項目

- 完成項目
  - 附件一校長聲明上傳系統
  - 附件二單位主管聲明指派流程
  - 附件三、四單位普查指派流程
  - 普查專案設計
  - 館舍管理系統
  - 介接人事資料


---

# 職務不法侵害預防計畫管理系統 - 簽核流程設計

- 每周開會討論，釐清行政單位需求
- 額外訂定前會、後會，確定開發方向與目標
- 測試 - 回報流程：每周根據上週版本使用者的問題進行更新

![](/flow.png){class=w-70%}

---

# 職務不法侵害預防計畫管理系統 - 簽核流程設計


- 模組化流程轉換設計，兼容簽核的不同流程
- 不同需求提出時，用現有模組兼容，加速開發

![](/flow_code.png){class=w-70%}

---


# 職務不法侵害預防計畫管理系統 - 介接人事系統

<div grid grid-cols-2>

- 上游資料有許多問題
  - 單位無主管
  - 單位無人員 (虛級單位)
- 討論並設計應對資料缺失
  - 遞迴尋找上級主管為本單位主管
  - 保留彈性指派的功能


![](/departments.png)

</div>

---

# Oauth維護 - 工作項目

- 完成項目
  - 版本更新與升級
  - 程式碼設定參數遷移
  - log優化
  - 容器化
  - 問題排除


---

# Oauth維護 - 版本更新與升級

- 版本升級
  - Python 3.9 => Python 3.12.11
  - Django 3.2 => Django 5.1
  - 其餘相依套件升級至最新版本
- 設定參數遷移
  - 既有版本將很多連線及密鑰放在程式碼內
  - 將這些設定搬到環境變數設定檔 (`.env`)
  - 在文件中補上設定方法

---

# Oauth維護 - 容器化

<div grid grid-cols-2>

- 容器化
  - 既有版本將參數與啟動命令設置在不同設定檔內，不好管理與未來維護
  - 將現有架構容器化
  - 為保護`/admin`路由，外部仍然有nginx，但負責ssl及防火牆
    - 沒有外部nginx，服務仍能用`docker compose up`啟動

![](/oauth.png)

</div>

---

# Oauth維護 - 問題排除

- 處理登入後回傳500錯誤的問題
  - 經查為系統無法從LDAP取得該用戶的email欄位，由LDAP端補齊資料

---

# 結論與建議

- Oauth
  - 應該比照Portal資安要求(LDAP備援、2FA)

---
layout: cover
---

# 問題與討論