import{_ as Z,a as Y,b as $,c as ee,d as te}from"../modules/unplugin-icons-CFPTJliM.js";import{t as b,a0 as ne,y as k,A,d as O,a1 as oe,a2 as re,a3 as se,D as M,C as le,a4 as ie,n as ae,o as u,c as x,i as _,h,a5 as U,a6 as G,b as g,j as ce,e as s,l as p,F as V,x as z,g as D,Z as de,M as ue,a7 as me,J as fe,a8 as pe,a9 as _e,k as F}from"../modules/vue-C2_u18UA.js";import{b as T,C as ve,e as xe,c as K,h as ge,j as ke,d as ye,k as be}from"../index-9B86silg.js";import{r as he,u as Ce,S as Se,N as we,Q as Ne,G as Fe,a as ze,I as De}from"./SlidesShow-Bxupzifj.js";import{s as Me,d as Oe,i as Te,p as je,b as Pe,c as He,e as Ie,g as Ee,S as Le}from"./bottom-EDvzgMew.js";import{N as Q}from"./NoteDisplay-C2seGYCu.js";import Ve from"./DrawingControls-0Bouz5GB.js";import{u as Be}from"./DrawingPreview-BoRdncJ9.js";import"../modules/shiki-B_Yc-FM6.js";import"./context-BT4Oe31f.js";function W(c){if(c==null)return{info:b(),update:async()=>{}};const t=`/@slidev/slide/${c}.json`,{data:o,execute:e}=ne(t).json().get();return e(),{info:o,update:async r=>await fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then(i=>i.json())}}const L={};function qe(c){function t(o){return L[o]??(L[o]=W(o))}return{info:k(()=>t(A(c)).info.value),update:async(o,e)=>{const l=t(e??A(c)),r=await l.update(o);return r&&(l.info.value=r),r}}}const Re=O({__name:"NoteEditable",props:{no:{type:Number,required:!0},class:{default:""},editing:{default:!1},style:{default:()=>({})},placeholder:{default:"No notes for this slide"},clicksContext:{type:Object},autoHeight:{default:!1}},emits:["update:editing","markerDblclick","markerClick"],setup(c,{expose:t,emit:o}){t();const e=c,l=o,r=oe(e,"editing",l,{passive:!0}),{info:i,update:n}=qe(re(e,"no")),a=b("");let f;const{ignoreUpdates:v}=se(a,m=>{if(!r.value)return;const j=e.no;clearTimeout(f),f=setTimeout(()=>{n({note:m},j)},500)});M(()=>{var m;return(m=i.value)==null?void 0:m.note},(m="")=>{r.value||(clearTimeout(f),v(()=>{a.value=m}))},{immediate:!0,flush:"sync"});const d=b(),S=b();le(()=>{var m;r.value&&((m=d.value)==null||m.focus())}),ie(d,()=>{r.value=!1});function C(){!e.autoHeight||!d.value||!r.value||d.value.scrollHeight>d.value.clientHeight&&(d.value.style.height=`${d.value.scrollHeight}px`)}M([a,r],()=>{ae(()=>{C()})},{flush:"post",immediate:!0});const w={props:e,emit:l,editing:r,info:i,update:n,note:a,get timer(){return f},set timer(m){f=m},ignoreUpdates:v,inputEl:d,inputHeight:S,calculateEditorHeight:C,NoteDisplay:Q};return Object.defineProperty(w,"__isScriptSetup",{enumerable:!1,value:!0}),w}}),Ae=["placeholder"];function Ke(c,t,o,e,l,r){var i;return e.editing?U((u(),g("textarea",{key:1,ref:"inputEl","onUpdate:modelValue":t[2]||(t[2]=n=>e.note=n),class:_(["prose resize-none overflow-auto outline-none bg-transparent block border-primary border-2",e.props.class]),style:h([{"line-height":"1.75"},[e.props.style,e.inputHeight!=null?{height:`${e.inputHeight}px`}:{}]]),placeholder:o.placeholder,onKeydown:t[3]||(t[3]=ce(n=>e.editing=!1,["esc"]))},null,46,Ae)),[[G,e.note]]):(u(),x(e.NoteDisplay,{key:0,class:_(["border-transparent border-2",[e.props.class,e.note?"":"opacity-25 italic select-none"]]),style:h(e.props.style),note:e.note||o.placeholder,"note-html":(i=e.info)==null?void 0:i.noteHTML,"clicks-context":o.clicksContext,"auto-scroll":!o.autoHeight,onMarkerClick:t[0]||(t[0]=(n,a)=>e.emit("markerClick",n,a)),onMarkerDblclick:t[1]||(t[1]=(n,a)=>e.emit("markerDblclick",n,a))},null,8,["class","style","note","note-html","clicks-context","auto-scroll"]))}const Ue=T(Re,[["render",Ke],["__file","/home/runner/work/slides/slides/node_modules/.pnpm/@slidev+client@0.48.1_postcss@8.4.47_vite@5.4.8/node_modules/@slidev/client/internals/NoteEditable.vue"]]),Ge=O({__name:"NoteStatic",props:{no:{type:Number,required:!0},class:{type:String,required:!1},clicksContext:{type:Object,required:!1}},setup(c,{expose:t}){t();const o=c,{info:e}=W(o.no),l={props:o,info:e,NoteDisplay:Q};return Object.defineProperty(l,"__isScriptSetup",{enumerable:!1,value:!0}),l}});function Qe(c,t,o,e,l,r){var i,n;return u(),x(e.NoteDisplay,{class:_(e.props.class),note:(i=e.info)==null?void 0:i.note,"note-html":(n=e.info)==null?void 0:n.noteHTML,"clicks-context":o.clicksContext},null,8,["class","note","note-html","clicks-context"])}const We=T(Ge,[["render",Qe],["__file","/home/runner/work/slides/slides/node_modules/.pnpm/@slidev+client@0.48.1_postcss@8.4.47_vite@5.4.8/node_modules/@slidev/client/internals/NoteStatic.vue"]]),Xe=O({__name:"ClicksSlider",props:{clicksContext:{type:Object,required:!0}},setup(c,{expose:t}){t();const o=c,e=k(()=>o.clicksContext.total),l=k({get(){return o.clicksContext.current>e.value?-1:o.clicksContext.current},set(a){o.clicksContext.current=a}}),r=k(()=>Array.from({length:e.value+1},(a,f)=>f));function i(){(l.value<0||l.value>e.value)&&(l.value=0)}const n={props:o,total:e,current:l,range:r,onMousedown:i,get CLICKS_MAX(){return ve}};return Object.defineProperty(n,"__isScriptSetup",{enumerable:!1,value:!0}),n}}),Je=["title"],Ze={class:"flex gap-1 items-center min-w-16 tabular-nums"},Ye={"text-primary":""},$e={op50:""},et=["max"];function tt(c,t,o,e,l,r){const i=Z;return u(),g("div",{class:_(["flex gap-0.5 items-center select-none",e.total?"":"op50"]),title:`Clicks in this slide: ${e.total}`},[s("div",Ze,[p(i,{"text-sm":"",op50:""}),e.current>=0&&e.current!==e.CLICKS_MAX?(u(),g(V,{key:0},[t[3]||(t[3]=s("div",{"flex-auto":""},null,-1)),s("span",Ye,z(e.current),1),t[4]||(t[4]=s("span",{op25:""},"/",-1))],64)):D("v-if",!0),s("span",$e,z(e.total),1)]),s("div",{relative:"","flex-auto":"",h5:"",flex:"~",onDblclick:t[2]||(t[2]=n=>e.current=o.clicksContext.total)},[(u(!0),g(V,null,de(e.range,n=>(u(),g("div",{key:n,border:"y main","of-hidden":"",relative:"",class:_([n===0?"rounded-l border-l":"",n===e.total?"rounded-r border-r":""]),style:h({width:e.total>0?`${1/e.total*100}%`:"100%"})},[s("div",{absolute:"","inset-0":"",class:_(n<=e.current?"bg-primary op20":"")},null,2),s("div",{class:_([+n==+e.current?"text-primary font-bold op100 border-primary":"op30 border-main",n===0?"rounded-l":"",n===e.total?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},z(n),3)],6))),128)),U(s("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>e.current=n),class:"range",absolute:"","inset-0":"",type:"range",min:0,max:e.total,step:1,"z-10":"",op0:"",style:h({"--thumb-width":`${1/(e.total+1)*100}%`}),onMousedown:e.onMousedown,onFocus:t[1]||(t[1]=n=>{var a;return(a=n.currentTarget)==null?void 0:a.blur()})},null,44,et),[[G,e.current]])],32)],10,Je)}const nt=T(Xe,[["render",tt],["__scopeId","data-v-0fbb889d"],["__file","/home/runner/work/slides/slides/node_modules/.pnpm/@slidev+client@0.48.1_postcss@8.4.47_vite@5.4.8/node_modules/@slidev/client/internals/ClicksSlider.vue"]]),ot=O({__name:"presenter",setup(c,{expose:t}){t();const o=b();he(),Ce(o);const{clicksContext:e,currentSlideNo:l,currentSlideRoute:r,hasNext:i,nextRoute:n,slides:a,queryClicks:f,getPrimaryClicks:v,total:d}=xe(),{isDrawing:S}=Be(),C=K.titleTemplate.replace("%s",K.title||"Slidev");ge({title:`Presenter - ${C}`});const w=b(!1),{timer:m,resetTimer:j}=ke(),B=k(()=>a.value.map(H=>ye(H))),N=k(()=>e.value.current<e.value.total?[r.value,e.value.current+1]:i.value?[n.value,0]:null),P=k(()=>N.value&&B.value[N.value[0].no-1]);M([r,f],()=>{P.value&&(P.value.current=N.value[1])},{immediate:!0});const X=ue();me(()=>{const H=o.value.querySelector("#slide-content"),R=fe(pe()),J=_e();M(()=>{if(!J.value||S.value||!Me.value)return;const y=H.getBoundingClientRect(),I=(R.x-y.left)/y.width*100,E=(R.y-y.top)/y.height*100;if(!(I<0||I>100||E<0||E>100))return{x:I,y:E}},y=>{be.cursor=y})});const q={main:o,clicksContext:e,currentSlideNo:l,currentSlideRoute:r,hasNext:i,nextRoute:n,slides:a,queryClicks:f,getPrimaryClicks:v,total:d,isDrawing:S,slideTitle:C,notesEditing:w,timer:m,resetTimer:j,clicksCtxMap:B,nextFrame:N,nextFrameClicksCtx:P,SideEditor:X,get decreasePresenterFontSize(){return Oe},get increasePresenterFontSize(){return Te},get presenterLayout(){return je},get presenterNotesFontSize(){return Pe},get showEditor(){return He},get showOverview(){return Ie},get getSlideClass(){return Ee},SlideWrapper:Le,SlideContainer:Se,NavControls:we,QuickOverview:Ne,NoteEditable:Ue,NoteStatic:We,Goto:Fe,SlidesShow:ze,DrawingControls:Ve,IconButton:De,ClicksSlider:nt};return Object.defineProperty(q,"__isScriptSetup",{enumerable:!1,value:!0}),q}}),rt={class:"bg-main h-full slidev-presenter"},st={ref:"main",class:"relative grid-section main flex flex-col"},lt={class:"relative grid-section next flex flex-col p-2 lg:p-4"},it={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},at={class:"border-t border-main py-1 px-2 text-sm"},ct={class:"grid-section bottom flex"},dt={class:"text-2xl pl-2 pr-6 my-auto tabular-nums"},ut={class:"progress-bar"};function mt(c,t,o,e,l,r){var v;const i=Y,n=$,a=ee,f=te;return u(),g(V,null,[s("div",rt,[s("div",{class:_(["grid-container",`layout${e.presenterLayout}`])},[s("div",st,[p(e.SlideContainer,{key:"main",class:"h-full w-full p-2 lg:p-4 flex-auto"},{default:F(()=>[p(e.SlidesShow,{"render-context":"presenter"})]),_:1}),(u(),x(e.ClicksSlider,{key:(v=e.currentSlideRoute)==null?void 0:v.no,"clicks-context":e.getPrimaryClicks(e.currentSlideRoute),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"])),t[4]||(t[4]=s("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Current ",-1))],512),s("div",lt,[e.nextFrame&&e.nextFrameClicksCtx?(u(),x(e.SlideContainer,{key:"next",class:"h-full w-full"},{default:F(()=>[(u(),x(e.SlideWrapper,{is:e.nextFrame[0].component,key:e.nextFrame[0].no,"clicks-context":e.nextFrameClicksCtx,class:_(e.getSlideClass(e.nextFrame[0])),route:e.nextFrame[0],"render-context":"previewNext"},null,8,["is","clicks-context","class","route"]))]),_:1})):D("v-if",!0),t[5]||(t[5]=s("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1))]),D(" Notes "),(u(),g("div",it,[(u(),x(e.NoteStatic,{key:`static-${e.currentSlideNo}`,no:e.currentSlideNo,class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:h({fontSize:`${e.presenterNotesFontSize}em`}),"clicks-context":e.clicksContext},null,8,["no","style","clicks-context"])),s("div",at,[p(e.IconButton,{title:"Increase font size",onClick:e.increasePresenterFontSize},{default:F(()=>[p(i)]),_:1},8,["onClick"]),p(e.IconButton,{title:"Decrease font size",onClick:e.decreasePresenterFontSize},{default:F(()=>[p(n)]),_:1},8,["onClick"]),D("v-if",!0)])])),s("div",ct,[p(e.NavControls,{persist:!0}),t[6]||(t[6]=s("div",{"flex-auto":""},null,-1)),s("div",{class:"timer-btn my-auto relative w-22px h-22px cursor-pointer text-lg",opacity:"50 hover:100",onClick:t[2]||(t[2]=(...d)=>e.resetTimer&&e.resetTimer(...d))},[p(a,{class:"absolute"}),p(f,{class:"absolute opacity-0"})]),s("div",dt,z(e.timer),1)]),(u(),x(e.DrawingControls,{key:2}))],2),s("div",ut,[s("div",{class:"progress h-3px bg-primary transition-all",style:h({width:`${(e.currentSlideNo-1)/(e.total-1)*100}%`})},null,4)])]),p(e.Goto),p(e.QuickOverview,{modelValue:e.showOverview,"onUpdate:modelValue":t[3]||(t[3]=d=>e.showOverview=d)},null,8,["modelValue"])],64)}const Ct=T(ot,[["render",mt],["__scopeId","data-v-0e24f88d"],["__file","/home/runner/work/slides/slides/node_modules/.pnpm/@slidev+client@0.48.1_postcss@8.4.47_vite@5.4.8/node_modules/@slidev/client/pages/presenter.vue"]]);export{Ct as default};
